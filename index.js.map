{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49351983-6f21a445dc99e49ed2940712c\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page: page,\n                per_page: perPage\n            }\n        });\n\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\"; \nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250\n});\n\nexport default function renderImages(images, galleryElement) {\n  const markup = images\n    .map(image => {\n      return `\n      <li> \n        <a href=\"${image.largeImageURL}\" class=\"gallery__item\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>   \n        <div class=\"card-info\">\n          <div class=\"likes\">\n            <h3>Likes </h3>\n            <p>${image.likes}</p>\n          </div> \n          <div class=\"views\">\n            <h3>Views </h3>\n            <p>${image.views}</p>\n          </div> \n          <div class=\"favor\">\n            <h3>Comments</h3>\n            <p>${image.comments}</p>\n          </div> \n          <div class=\"down\">\n            <h3>Downloads</h3>\n            <p>${image.downloads}</p>\n          </div> \n        </div>\n      </li>\n      `;\n    })\n    .join(\"\");\n\n  galleryElement.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh(); \n}\n\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport renderImages from \"./js/render-functions.js\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nexport const fetchPostsBtn = document.querySelector(\".fetchPostsBtn\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250\n});\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nconst perPage = 15;\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    gallery.innerHTML = \"\"; \n    fetchPostsBtn.classList.remove(\"is-visible\"); \n\n    currentQuery = event.currentTarget.elements[\"search-text\"].value.trim();\n    currentPage = 1;\n\n    if (!currentQuery) {\n        iziToast.warning({\n            title: \"Warning\",\n            message: \"Please enter a search term.\",\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    try {\n        loader.style.display = \"block\";\n        const data = await fetchImages(currentQuery, currentPage, perPage);\n        loader.style.display = \"none\";\n\n        if (data.hits.length > 0) {\n            renderImages(data.hits, gallery);\n            lightbox.refresh();\n            fetchPostsBtn.classList.add(\"is-visible\");\n        } else {\n            iziToast.warning({\n                title: \"Warning\",\n                message: \"Sorry, no images found. Try again.\",\n                position: \"topRight\"\n            });\n        }\n    } catch (error) {\n        loader.style.display = \"none\";\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again later.\",\n            position: \"topRight\"\n        });\n    }\n});\n\nfetchPostsBtn.addEventListener(\"click\", async () => {\n    currentPage += 1;\n    try {\n        loader.style.display = \"block\";\n        const data = await fetchImages(currentQuery, currentPage, perPage);\n        loader.style.display = \"none\";\n\n        if (data.hits.length > 0) {\n            renderImages(data.hits, gallery);\n            lightbox.refresh();\n\n           \n            const cardHeight = gallery.firstElementChild?.getBoundingClientRect().height || 0;\n            window.scrollBy({\n                top: cardHeight * 2,\n                left: 0,\n                behavior: \"smooth\"\n            });\n        } else {\n            iziToast.info({\n                title: \"Info\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\"\n            });\n            fetchPostsBtn.classList.remove(\"is-visible\"); \n        }\n    } catch (error) {\n        loader.style.display = \"none\";\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again later.\",\n            position: \"topRight\"\n        });\n    }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","lightbox","SimpleLightbox","renderImages","images","galleryElement","markup","image","form","gallery","loader","fetchPostsBtn","currentQuery","currentPage","event","iziToast","data","cardHeight","_a"],"mappings":"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"}