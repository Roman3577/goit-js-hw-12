{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49351983-6f21a445dc99e49ed2940712c\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page: page,\n                per_page: perPage\n            }\n        });\n\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}","function renderImages(images, galleryElement) {\n  const markup = images\n    .map(image => {\n      return `\n      <li> <a href=\"${image.largeImageURL}\" class=\"gallery__item\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>   <div class=\"card-info\">\n           <div class=\"likes\"><h3>Likes </h3>\n           <p>${image.likes}</p></div> \n            <div class=\"views\"><h3>Views </h3>\n            <p>${image.views}</p></div> \n             <div class=\"favor\"><h3>Comments</h3>\n             <p> ${image.comments}</p></div> \n            <div class=\"down\"><h3>Downloads</h3>\n            <p> ${image.downloads}</p></div> \n           \n          </div></li>\n      `;\n    })\n    .join(\"\");\n\n galleryElement.insertAdjacentHTML(\"beforeend\", markup);\n}\n\nexport default renderImages;","import { fetchImages } from \"./js/pixabay-api.js\";\nimport renderImages from \"./js/render-functions.js\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\"; \nimport \"izitoast/dist/css/iziToast.min.css\"; \n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nexport const fetchPostsBtn = document.querySelector(\".fetchPostsBtn\");\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250\n});\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nconst perPage = 15;\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    fetchPostsBtn.classList.remove(\"is-visible\"); \n\n    currentQuery = event.currentTarget.elements[\"search-text\"].value.trim();\n    currentPage = 1; \n\n    if (!currentQuery) {\n        iziToast.warning({\n            title: \"Warning\",\n            message: \"Please enter a search term.\",\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    try {\n        loader.style.display = \"block\";\n        const data = await fetchImages(currentQuery, currentPage, perPage);\n        loader.style.display = \"none\";\n\n        if (data.hits.length > 0) {\n            renderImages(data.hits, gallery);\n            lightbox.refresh();\n            fetchPostsBtn.classList.add(\"is-visible\"); \n        } else {\n            iziToast.warning({\n                title: \"Warning\",\n                message: \"Sorry, no images found. Try again.\",\n                position: \"topRight\"\n            });\n        }\n    } catch (error) {\n        loader.style.display = \"none\";\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again later.\",\n            position: \"topRight\"\n        });\n    }\n});\n\nfetchPostsBtn.addEventListener(\"click\", async () => {\n    currentPage += 1;\n    try {\n        loader.style.display = \"block\";\n        const data = await fetchImages(currentQuery, currentPage, perPage);\n        loader.style.display = \"none\";\n\n        if (data.hits.length > 0) {\n            renderImages(data.hits, gallery);\n          lightbox.refresh();\n              const cardHeight = gallery.firstElementChild?.getBoundingClientRect().height || 0;\n window.scrollBy({\n        top: cardHeight * 2,\n        left: 0,\n        behavior: \"smooth\"\n    });\n\n        } else {\n            iziToast.info({\n                title: \"Info\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\"\n            });\n            fetchPostsBtn.classList.remove(\"is-visible\"); \n        }\n    } catch (error) {\n        loader.style.display = \"none\";\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again later.\",\n            position: \"topRight\"\n        });\n    }\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","renderImages","images","galleryElement","markup","image","form","gallery","loader","fetchPostsBtn","lightbox","SimpleLightbox","currentQuery","currentPage","event","iziToast","data","cardHeight","_a"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC7D,GAAI,CAaA,OAZiB,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACb,CACb,CAAS,GAEe,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCxBA,SAASC,EAAaC,EAAQC,EAAgB,CAC5C,MAAMC,EAASF,EACZ,IAAIG,GACI;AAAA,sBACSA,EAAM,aAAa;AAAA,sBACnBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,gBAG5CA,EAAM,KAAK;AAAA;AAAA,iBAEVA,EAAM,KAAK;AAAA;AAAA,mBAETA,EAAM,QAAQ;AAAA;AAAA,kBAEfA,EAAM,SAAS;AAAA;AAAA;AAAA,OAI5B,EACA,KAAK,EAAE,EAEXF,EAAe,mBAAmB,YAAaC,CAAM,CACtD,CCfA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAClCC,EAAgB,SAAS,cAAc,gBAAgB,EAE9DC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIC,EAAe,GACfC,EAAc,EAClB,MAAMf,EAAU,GAEhBQ,EAAK,iBAAiB,SAAU,MAAOQ,GAAU,CAQ7C,GAPAA,EAAM,eAAc,EACpBP,EAAQ,UAAY,GACpBE,EAAc,UAAU,OAAO,YAAY,EAE3CG,EAAeE,EAAM,cAAc,SAAS,aAAa,EAAE,MAAM,OACjED,EAAc,EAEV,CAACD,EAAc,CACfG,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,8BACT,SAAU,UACtB,CAAS,EACD,MACH,CAED,GAAI,CACAP,EAAO,MAAM,QAAU,QACvB,MAAMQ,EAAO,MAAMrB,EAAYiB,EAAcC,EAAaf,CAAO,EACjEU,EAAO,MAAM,QAAU,OAEnBQ,EAAK,KAAK,OAAS,GACnBf,EAAae,EAAK,KAAMT,CAAO,EAC/BG,EAAS,QAAO,EAChBD,EAAc,UAAU,IAAI,YAAY,GAExCM,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,qCACT,SAAU,UAC1B,CAAa,CAER,MAAe,CACZP,EAAO,MAAM,QAAU,OACvBO,EAAS,MAAM,CACX,MAAO,QACP,QAAS,gDACT,SAAU,UACtB,CAAS,CACJ,CACL,CAAC,EAEDN,EAAc,iBAAiB,QAAS,SAAY,OAChDI,GAAe,EACf,GAAI,CACAL,EAAO,MAAM,QAAU,QACvB,MAAMQ,EAAO,MAAMrB,EAAYiB,EAAcC,EAAaf,CAAO,EAGjE,GAFAU,EAAO,MAAM,QAAU,OAEnBQ,EAAK,KAAK,OAAS,EAAG,CACtBf,EAAae,EAAK,KAAMT,CAAO,EACjCG,EAAS,QAAO,EACZ,MAAMO,IAAaC,EAAAX,EAAQ,oBAAR,YAAAW,EAA2B,wBAAwB,SAAU,EAC7F,OAAO,SAAS,CACT,IAAKD,EAAa,EAClB,KAAM,EACN,SAAU,QAClB,CAAK,CAEL,MACYF,EAAS,KAAK,CACV,MAAO,OACP,QAAS,6DACT,SAAU,UAC1B,CAAa,EACDN,EAAc,UAAU,OAAO,YAAY,CAElD,MAAe,CACZD,EAAO,MAAM,QAAU,OACvBO,EAAS,MAAM,CACX,MAAO,QACP,QAAS,gDACT,SAAU,UACtB,CAAS,CACJ,CACL,CAAC"}